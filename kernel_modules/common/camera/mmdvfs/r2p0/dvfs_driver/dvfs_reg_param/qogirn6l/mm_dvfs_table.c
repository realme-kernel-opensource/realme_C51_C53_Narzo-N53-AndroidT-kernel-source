/*
 * Copyright (C) 2021-2022 UNISOC Communications Inc.
 *
 * This software is licensed under the terms of the GNU General Public
 * License version 2, as published by the Free Software Foundation, and
 * may be copied, distributed, and modified under those terms.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

#include "mm_dvfs.h"
#include "mmsys_dvfs_comm.h"

struct ip_dvfs_map_cfg  cpp_dvfs_config_table[8] = {
	{0, REG_MM_DVFS_AHB_CPP_INDEX0_MAP, VOLT60, CPP_CLK1280,
		CPP_CLK_INDEX_1280, MM_MTX_CLK_INDEX_1536, 0, 0, "0.6v"},
	{1, REG_MM_DVFS_AHB_CPP_INDEX1_MAP, VOLT60, CPP_CLK1920,
		CPP_CLK_INDEX_1920, MM_MTX_CLK_INDEX_2560, 0, 0, "0.6v"},
	{2, REG_MM_DVFS_AHB_CPP_INDEX2_MAP, VOLT60, CPP_CLK2560,
		CPP_CLK_INDEX_2560, MM_MTX_CLK_INDEX_2560, 0, 0, "0.6v"},
	{3, REG_MM_DVFS_AHB_CPP_INDEX3_MAP, VOLT65, CPP_CLK3072,
		CPP_CLK_INDEX_3072, MM_MTX_CLK_INDEX_3072, 0, 0, "0.65v"},
	{4, REG_MM_DVFS_AHB_CPP_INDEX4_MAP, VOLT70, CPP_CLK3840,
		CPP_CLK_INDEX_3840, MM_MTX_CLK_INDEX_4096, 0, 0, "0.7v"},
	{5, REG_MM_DVFS_AHB_CPP_INDEX5_MAP, VOLT70, CPP_CLK3840,
		CPP_CLK_INDEX_3840, MM_MTX_CLK_INDEX_4096, 0, 0, "0.7v"},
	{6, REG_MM_DVFS_AHB_CPP_INDEX6_MAP, VOLT70, CPP_CLK3840,
		CPP_CLK_INDEX_3840, MM_MTX_CLK_INDEX_4096, 0, 0, "0.7v"},
	{7, REG_MM_DVFS_AHB_CPP_INDEX7_MAP, VOLT70, CPP_CLK3840,
		CPP_CLK_INDEX_3840, MM_MTX_CLK_INDEX_4096, 0, 0, "0.7v"},
};

struct ip_dvfs_map_cfg dcam0_1_dvfs_config_table[8] = {
	{0, REG_MM_DVFS_AHB_DCAM0_1_INDEX0_MAP,
		VOLT60, DCAM0_1_CLK1536, DCAM0_1_CLK_INDEX_1536,
		MM_MTX_CLK_INDEX_1536, DCAM_MTX_CLK_INDEX_1536,
		DCAM0_1_AXI_CLK_INDEX_1536, "0.6v"},
	{1, REG_MM_DVFS_AHB_DCAM0_1_INDEX1_MAP,
		VOLT60, DCAM0_1_CLK2560, DCAM0_1_CLK_INDEX_2560,
		MM_MTX_CLK_INDEX_2560, DCAM_MTX_CLK_INDEX_3072,
		DCAM0_1_AXI_CLK_INDEX_2560, "0.6v"},
	{2, REG_MM_DVFS_AHB_DCAM0_1_INDEX2_MAP,
		VOLT60, DCAM0_1_CLK3072, DCAM0_1_CLK_INDEX_3072,
		MM_MTX_CLK_INDEX_3072, DCAM_MTX_CLK_INDEX_3072,
		DCAM0_1_AXI_CLK_INDEX_3072, "0.6v"},
	{3, REG_MM_DVFS_AHB_DCAM0_1_INDEX3_MAP,
		VOLT65, DCAM0_1_CLK4096, DCAM0_1_CLK_INDEX_4096,
		MM_MTX_CLK_INDEX_4096, DCAM_MTX_CLK_INDEX_4096,
		DCAM0_1_AXI_CLK_INDEX_4096, "0.65v"},
	{4, REG_MM_DVFS_AHB_DCAM0_1_INDEX4_MAP,
		VOLT70, DCAM0_1_CLK5120, DCAM0_1_CLK_INDEX_5120,
		MM_MTX_CLK_INDEX_5120, DCAM_MTX_CLK_INDEX_5120,
		DCAM0_1_AXI_CLK_INDEX_5120, "0.7v"},
	{5, REG_MM_DVFS_AHB_DCAM0_1_INDEX5_MAP,
		VOLT70, DCAM0_1_CLK5120, DCAM0_1_CLK_INDEX_5120,
		MM_MTX_CLK_INDEX_5120, DCAM_MTX_CLK_INDEX_5120,
		DCAM0_1_AXI_CLK_INDEX_5120, "0.7v"},
	{6, REG_MM_DVFS_AHB_DCAM0_1_INDEX6_MAP,
		VOLT70, DCAM0_1_CLK5120, DCAM0_1_CLK_INDEX_5120,
		MM_MTX_CLK_INDEX_5120, DCAM_MTX_CLK_INDEX_5120,
		DCAM0_1_AXI_CLK_INDEX_5120, "0.7v"},
	{7, REG_MM_DVFS_AHB_DCAM0_1_INDEX7_MAP,
		VOLT70, DCAM0_1_CLK5120, DCAM0_1_CLK_INDEX_5120,
		MM_MTX_CLK_INDEX_5120, DCAM_MTX_CLK_INDEX_5120,
		DCAM0_1_AXI_CLK_INDEX_5120, "0.7v"},
};

struct ip_dvfs_map_cfg dcam0_1_axi_dvfs_config_table[8] = {
	{0, REG_MM_DVFS_AHB_DCAM0_1_AXI_INDEX0_MAP, VOLT60,
		DCAM0_1_AXI_CLK1536, DCAM0_1_AXI_CLK_INDEX_1536, 0, 0, 0, "0.6v"},
	{1, REG_MM_DVFS_AHB_DCAM0_1_AXI_INDEX1_MAP, VOLT60,
		DCAM0_1_AXI_CLK2560, DCAM0_1_AXI_CLK_INDEX_2560, 0, 0, 0, "0.6v"},
	{2, REG_MM_DVFS_AHB_DCAM0_1_AXI_INDEX2_MAP, VOLT60,
		DCAM0_1_AXI_CLK3072, DCAM0_1_AXI_CLK_INDEX_3072, 0, 0, 0, "0.6v"},
	{3, REG_MM_DVFS_AHB_DCAM0_1_AXI_INDEX3_MAP, VOLT65,
		DCAM0_1_AXI_CLK4096, DCAM0_1_AXI_CLK_INDEX_4096, 0, 0, 0, "0.65v"},
	{4, REG_MM_DVFS_AHB_DCAM0_1_AXI_INDEX4_MAP, VOLT70,
		DCAM0_1_AXI_CLK5120, DCAM0_1_AXI_CLK_INDEX_5120, 0, 0, 0, "0.7v"},
	{5, REG_MM_DVFS_AHB_DCAM0_1_AXI_INDEX5_MAP, VOLT70,
		DCAM0_1_AXI_CLK5120, DCAM0_1_AXI_CLK_INDEX_5120, 0, 0, 0, "0.7v"},
	{6, REG_MM_DVFS_AHB_DCAM0_1_AXI_INDEX6_MAP, VOLT70,
		DCAM0_1_AXI_CLK5120, DCAM0_1_AXI_CLK_INDEX_5120, 0, 0, 0, "0.7v"},
	{7, REG_MM_DVFS_AHB_DCAM0_1_AXI_INDEX7_MAP, VOLT70,
		DCAM0_1_AXI_CLK5120, DCAM0_1_AXI_CLK_INDEX_5120, 0, 0, 0, "0.7v"},
};

struct ip_dvfs_map_cfg dcam2_3_dvfs_config_table[8] = {
	{0, REG_MM_DVFS_AHB_DCAM2_3_INDEX0_MAP,
		VOLT60, DCAM2_3_CLK960, DCAM2_3_CLK_INDEX_960,
		MM_MTX_CLK_INDEX_1536, DCAM_MTX_CLK_INDEX_1536,
		DCAM2_3_AXI_CLK_INDEX_960, "0.6v"},
	{1, REG_MM_DVFS_AHB_DCAM2_3_INDEX1_MAP,
		VOLT60, DCAM2_3_CLK1280, DCAM2_3_CLK_INDEX_1280,
		MM_MTX_CLK_INDEX_1536, DCAM_MTX_CLK_INDEX_1536,
		DCAM2_3_AXI_CLK_INDEX_1280, "0.6v"},
	{2, REG_MM_DVFS_AHB_DCAM2_3_INDEX2_MAP,
		VOLT60, DCAM2_3_CLK1536, DCAM2_3_CLK_INDEX_1536,
		MM_MTX_CLK_INDEX_1536, DCAM_MTX_CLK_INDEX_1536,
		DCAM2_3_AXI_CLK_INDEX_1536, "0.6v"},
	{3, REG_MM_DVFS_AHB_DCAM2_3_INDEX3_MAP,
		VOLT65, DCAM2_3_CLK1920, DCAM2_3_CLK_INDEX_1920,
		MM_MTX_CLK_INDEX_2560, DCAM_MTX_CLK_INDEX_3072,
		DCAM2_3_AXI_CLK_INDEX_1920, "0.65v"},
	{4, REG_MM_DVFS_AHB_DCAM2_3_INDEX4_MAP,
		VOLT70, DCAM2_3_CLK2560, DCAM2_3_CLK_INDEX_2560,
		MM_MTX_CLK_INDEX_2560, DCAM_MTX_CLK_INDEX_3072,
		DCAM2_3_AXI_CLK_INDEX_2560, "0.7v"},
	{5, REG_MM_DVFS_AHB_DCAM2_3_INDEX5_MAP,
		VOLT70, DCAM2_3_CLK2560, DCAM2_3_CLK_INDEX_2560,
		MM_MTX_CLK_INDEX_2560, DCAM_MTX_CLK_INDEX_3072,
		DCAM2_3_AXI_CLK_INDEX_2560, "0.7v"},
	{6, REG_MM_DVFS_AHB_DCAM2_3_INDEX6_MAP,
		VOLT70, DCAM2_3_CLK2560, DCAM2_3_CLK_INDEX_2560,
		MM_MTX_CLK_INDEX_2560, DCAM_MTX_CLK_INDEX_3072,
		DCAM2_3_AXI_CLK_INDEX_2560, "0.7v"},
	{7, REG_MM_DVFS_AHB_DCAM2_3_INDEX7_MAP,
		VOLT70, DCAM2_3_CLK2560, DCAM2_3_CLK_INDEX_2560,
		MM_MTX_CLK_INDEX_2560, DCAM_MTX_CLK_INDEX_3072,
		DCAM2_3_AXI_CLK_INDEX_2560, "0.7v"},
};

struct ip_dvfs_map_cfg dcam2_3_axi_dvfs_config_table[8] = {
	{0, REG_MM_DVFS_AHB_DCAM2_3_AXI_INDEX0_MAP, VOLT60,
		DCAM2_3_AXI_CLK960, DCAM2_3_AXI_CLK_INDEX_960, 0, 0, 0, "0.6v"},
	{1, REG_MM_DVFS_AHB_DCAM2_3_AXI_INDEX1_MAP, VOLT60,
		DCAM2_3_AXI_CLK1280, DCAM2_3_AXI_CLK_INDEX_1280, 0, 0, 0, "0.6v"},
	{2, REG_MM_DVFS_AHB_DCAM2_3_AXI_INDEX2_MAP, VOLT60,
		DCAM2_3_AXI_CLK1536, DCAM2_3_AXI_CLK_INDEX_1536, 0, 0, 0, "0.6v"},
	{3, REG_MM_DVFS_AHB_DCAM2_3_AXI_INDEX3_MAP, VOLT65,
		DCAM2_3_AXI_CLK1920, DCAM2_3_AXI_CLK_INDEX_1920, 0, 0, 0, "0.65v"},
	{4, REG_MM_DVFS_AHB_DCAM2_3_AXI_INDEX4_MAP, VOLT70,
		DCAM2_3_AXI_CLK2560, DCAM2_3_AXI_CLK_INDEX_2560, 0, 0, 0, "0.7v"},
	{5, REG_MM_DVFS_AHB_DCAM2_3_AXI_INDEX5_MAP, VOLT70,
		DCAM2_3_AXI_CLK2560, DCAM2_3_AXI_CLK_INDEX_2560, 0, 0, 0, "0.7v"},
	{6, REG_MM_DVFS_AHB_DCAM2_3_AXI_INDEX6_MAP, VOLT70,
		DCAM2_3_AXI_CLK2560, DCAM2_3_AXI_CLK_INDEX_2560, 0, 0, 0, "0.7v"},
	{7, REG_MM_DVFS_AHB_DCAM2_3_AXI_INDEX7_MAP, VOLT70,
		DCAM2_3_AXI_CLK2560, DCAM2_3_AXI_CLK_INDEX_2560, 0, 0, 0, "0.7v"},
};

struct ip_dvfs_map_cfg dcam_mtx_dvfs_config_table[8] = {
	{0, REG_MM_DVFS_AHB_DCAM_MTX_INDEX0_MAP, VOLT60,
		DCAM_MTX_CLK1536, DCAM_MTX_CLK_INDEX_1536, 0, 0, 0, "0.6v"},
	{1, REG_MM_DVFS_AHB_DCAM_MTX_INDEX1_MAP, VOLT60,
		DCAM_MTX_CLK3072, DCAM_MTX_CLK_INDEX_3072, 0, 0, 0, "0.6v"},
	{2, REG_MM_DVFS_AHB_DCAM_MTX_INDEX2_MAP, VOLT65,
		DCAM_MTX_CLK4096, DCAM_MTX_CLK_INDEX_4096,  0, 0, 0, "0.65v"},
	{3, REG_MM_DVFS_AHB_DCAM_MTX_INDEX3_MAP, VOLT70,
		DCAM_MTX_CLK5120, DCAM_MTX_CLK_INDEX_5120, 0, 0, 0, "0.7v"},
	{4, REG_MM_DVFS_AHB_DCAM_MTX_INDEX4_MAP, VOLT70,
		DCAM_MTX_CLK5120, DCAM_MTX_CLK_INDEX_5120, 0, 0, 0, "0.7v"},
	{5, REG_MM_DVFS_AHB_DCAM_MTX_INDEX5_MAP, VOLT70,
		DCAM_MTX_CLK5120, DCAM_MTX_CLK_INDEX_5120, 0, 0, 0, "0.7v"},
	{6, REG_MM_DVFS_AHB_DCAM_MTX_INDEX6_MAP, VOLT70,
		DCAM_MTX_CLK5120, DCAM_MTX_CLK_INDEX_5120, 0, 0, 0, "0.7v"},
	{7, REG_MM_DVFS_AHB_DCAM_MTX_INDEX7_MAP, VOLT70,
		DCAM_MTX_CLK5120, DCAM_MTX_CLK_INDEX_5120, 0, 0, 0, "0.7v"},
};

struct ip_dvfs_map_cfg isp_dvfs_config_table[8] = {
	{0, REG_MM_DVFS_AHB_ISP_INDEX0_MAP, VOLT60,
		ISP_CLK1536, ISP_CLK_INDEX_1536, MM_MTX_CLK_INDEX_1536, 0, 0, "0.6v"},
	{1, REG_MM_DVFS_AHB_ISP_INDEX1_MAP, VOLT60,
		ISP_CLK2560, ISP_CLK_INDEX_2560, MM_MTX_CLK_INDEX_2560, 0, 0, "0.6v"},
	{2, REG_MM_DVFS_AHB_ISP_INDEX2_MAP, VOLT60,
		ISP_CLK3072, ISP_CLK_INDEX_3072, MM_MTX_CLK_INDEX_3072, 0, 0, "0.6v"},
	{3, REG_MM_DVFS_AHB_ISP_INDEX3_MAP, VOLT65,
		ISP_CLK4096, ISP_CLK_INDEX_4096, MM_MTX_CLK_INDEX_4096, 0, 0, "0.65v"},
	{4, REG_MM_DVFS_AHB_ISP_INDEX4_MAP, VOLT70,
		ISP_CLK4096, ISP_CLK_INDEX_4096, MM_MTX_CLK_INDEX_4096, 0, 0, "0.70v"},
	{5, REG_MM_DVFS_AHB_ISP_INDEX5_MAP, VOLT75,
		ISP_CLK5120, ISP_CLK_INDEX_5120, MM_MTX_CLK_INDEX_5120, 0, 0, "0.75v"},
	{6, REG_MM_DVFS_AHB_ISP_INDEX6_MAP, VOLT75,
		ISP_CLK5120, ISP_CLK_INDEX_5120, MM_MTX_CLK_INDEX_5120, 0, 0, "0.75v"},
	{7, REG_MM_DVFS_AHB_ISP_INDEX7_MAP, VOLT75,
		ISP_CLK5120, ISP_CLK_INDEX_5120, MM_MTX_CLK_INDEX_5120, 0, 0, "0.75v"},
};

struct ip_dvfs_map_cfg jpg_dvfs_config_table[8] = {
	{0, REG_MM_DVFS_AHB_JPG_INDEX0_MAP, VOLT60,
		JPG_CLK1536, JPG_CLK_INDEX_1536, MM_MTX_CLK_INDEX_1536, 0, 0, "0.6v"},
	{1, REG_MM_DVFS_AHB_JPG_INDEX1_MAP, VOLT60,
		JPG_CLK2560, JPG_CLK_INDEX_2560, MM_MTX_CLK_INDEX_2560, 0, 0, "0.6v"},
	{2, REG_MM_DVFS_AHB_JPG_INDEX2_MAP, VOLT60,
		JPG_CLK3072, JPG_CLK_INDEX_3072, MM_MTX_CLK_INDEX_3072, 0, 0, "0.6v"},
	{3, REG_MM_DVFS_AHB_JPG_INDEX3_MAP, VOLT65,
		JPG_CLK4096, JPG_CLK_INDEX_4096, MM_MTX_CLK_INDEX_4096, 0, 0, "0.65v"},
	{4, REG_MM_DVFS_AHB_JPG_INDEX4_MAP, VOLT70,
		JPG_CLK5120, JPG_CLK_INDEX_5120, MM_MTX_CLK_INDEX_5120, 0, 0, "0.7v"},
	{5, REG_MM_DVFS_AHB_JPG_INDEX5_MAP, VOLT70,
		JPG_CLK5120, JPG_CLK_INDEX_5120, MM_MTX_CLK_INDEX_5120, 0, 0, "0.7v"},
	{6, REG_MM_DVFS_AHB_JPG_INDEX6_MAP, VOLT70,
		JPG_CLK5120, JPG_CLK_INDEX_5120, MM_MTX_CLK_INDEX_5120, 0, 0, "0.7v"},
	{7, REG_MM_DVFS_AHB_JPG_INDEX7_MAP, VOLT70,
		JPG_CLK5120, JPG_CLK_INDEX_5120, MM_MTX_CLK_INDEX_5120, 0, 0, "0.7v"},
};

struct ip_dvfs_map_cfg mtx_data_dvfs_config_table[8] = {
	{0, REG_MM_DVFS_AHB_MM_MTX_DATA_INDEX0_MAP, VOLT60,
		MM_MTX_DATA_CLK3072, MM_MTX_CLK_INDEX_3072, 0, 0, 0, "0.6v"},
	{1, REG_MM_DVFS_AHB_MM_MTX_DATA_INDEX1_MAP, VOLT60,
		MM_MTX_DATA_CLK3072, MM_MTX_CLK_INDEX_3072, 0, 0, 0, "0.6v"},
	{2, REG_MM_DVFS_AHB_MM_MTX_DATA_INDEX2_MAP, VOLT60,
		MM_MTX_DATA_CLK3072, MM_MTX_CLK_INDEX_3072, 0, 0, 0, "0.6v"},
	{3, REG_MM_DVFS_AHB_MM_MTX_DATA_INDEX3_MAP, VOLT65,
		MM_MTX_DATA_CLK4096, MM_MTX_CLK_INDEX_4096, 0, 0, 0, "0.65v"},
	{4, REG_MM_DVFS_AHB_MM_MTX_DATA_INDEX4_MAP, VOLT70,
		MM_MTX_DATA_CLK5120, MM_MTX_CLK_INDEX_5120, 0, 0, 0, "0.7v"},
	{5, REG_MM_DVFS_AHB_MM_MTX_DATA_INDEX5_MAP, VOLT70,
		MM_MTX_DATA_CLK5120, MM_MTX_CLK_INDEX_5120, 0, 0, 0, "0.7v"},
	{6, REG_MM_DVFS_AHB_MM_MTX_DATA_INDEX6_MAP, VOLT70,
		MM_MTX_DATA_CLK5120, MM_MTX_CLK_INDEX_5120, 0, 0, 0, "0.7v"},
	{7, REG_MM_DVFS_AHB_MM_MTX_DATA_INDEX7_MAP, VOLT70,
		MM_MTX_DATA_CLK5120, MM_MTX_CLK_INDEX_5120, 0, 0, 0, "0.7v"},
};